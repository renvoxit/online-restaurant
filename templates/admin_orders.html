{% extends 'base.html' %}
{% block title %}All Orders{% endblock %}
{% block content %}
<section class="admin-section fade-in">
  <h2 class="admin-title">All Orders</h2>

  {% if orders %}
  <div class="admin-card">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>User</th>
          <th>Total (â‚¬)</th>
          <th>Status</th>
          <th>Change</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>#{{ order.id }}</td>
          <td>{{ order.user_id }}</td>
          <td>{{ '%.2f'|format(order.total_price) }}</td>
          <td>
            <span class="status-badge {{ order.status|lower }}">
              {{ order.status }}
            </span>
          </td>
          <td>
            <form action="{{ url_for('admin.change_order_status', order_id=order.id) }}" method="post" class="inline-form">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <select name="status" class="status-select" required>
                <option {% if order.status=='Pending' %}selected{% endif %}>Pending</option>
                <option {% if order.status=='Preparing' %}selected{% endif %}>Preparing</option>
                <option {% if order.status=='Delivered' %}selected{% endif %}>Delivered</option>
                <option {% if order.status=='Cancelled' %}selected{% endif %}>Cancelled</option>
              </select>
              <button type="submit" class="btn-small edit">Update</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="empty-text">No orders yet. Customers must be starving.</p>
  {% endif %}
</section>
{% endblock %}
