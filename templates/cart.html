{% extends 'base.html' %}
{% block title %}Cart{% endblock %}
{% block content %}
<h2>Your Cart</h2>

{% if cart_items %}
<table border="1" cellpadding="8">
  <tr>
    <th>Dish</th>
    <th>Quantity</th>
    <th>Subtotal</th>
    <th>Actions</th>
  </tr>

  {% set total = 0 %}
  {% for item in cart_items %}
    {% set subtotal = item.price * item.quantity %}
    {% set total = total + subtotal %}
    <tr>
      <td>{{ item.name }}</td>
      <td>{{ item.quantity }}</td>
      <td>{{ subtotal }} €</td>
      <td>
        <a href="{{ url_for('main.decrease_quantity', dish_id=item.id) }}">−</a>
        {{ item.quantity }}
        <a href="{{ url_for('main.add_to_cart', dish_id=item.id) }}">+</a> |
        <a href="{{ url_for('main.remove_from_cart', dish_id=item.id) }}">Remove</a>
      </td>
    </tr>
  {% endfor %}
</table>

<p><strong>Total:</strong> {{ total }} €</p>

<a href="{{ url_for('main.checkout') }}" class="btn btn-success">Checkout</a>
<a href="{{ url_for('main.clear_cart') }}" class="btn btn-danger">Clear Cart</a>

{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
